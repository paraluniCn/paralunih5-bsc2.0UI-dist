"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["src_page_NftPledgeMining_pledge_js"],{48985:(e,t,r)=>{r.r(t),r.d(t,{default:()=>k});var n=r(10467),a=r(80296),s=r(54756),i=r.n(s),c=r(96540),o=r(13907),l=r(80060),d=r(81067),m=r(5611),f=r(74352),u=r(84973),p=r(88878),g=r(9770),h=r(82045),v=r(56347),w=r(18823),A=r(60346),N=r(44040),E=r(35733),b=r(78015);function k(){var e=(0,v.W5)(),t=(0,o.B)().t,r=(0,u.A)().user,s=(0,v.W6)(),k=(0,c.useState)(""),x=(0,a.A)(k,2),y=x[0],z=x[1],C=(0,c.useState)(!1),F=(0,a.A)(C,2),P=F[0],S=F[1],_=(0,c.useState)({}),B=(0,a.A)(_,2),j=B[0],T=B[1],Q=(0,c.useState)("0"),V=(0,a.A)(Q,2),W=V[0],D=V[1],G=(0,c.useState)([]),R=(0,a.A)(G,2),Z=R[0],$=R[1],L=(0,c.useState)(!0),M=(0,a.A)(L,2),U=M[0],Y=M[1],q=(0,c.useState)("0"),H=(0,a.A)(q,2),I=H[0],J=H[1],K=(0,c.useState)([]),O=(0,a.A)(K,2),X=O[0],ee=O[1],te=e.params.type,re=function(){var e=(0,n.A)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:z(t.address),T({price:t.price,pid:t.pid,img:t.img}),ne(t.address,t.img);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=(0,n.A)(i().mark((function e(t,n){var a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.address){e.next=2;break}return e.abrupt("return");case 2:return Y(!0),e.next=5,(0,f.$_)(t,r.address).catch((function(){}));case 5:a=e.sent,s=[],a.map((function(e){s.push({img:n,id:e})})),$(s),Y(!1);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ae=function(){var e=(0,n.A)(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j&&j.price&&r.address){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,f.Yy)(j.pid);case 4:t=e.sent,n=(0,A.g)(t.deposit).multipliedBy(j.price),n=(0,N.pZ)(n),D(n),se(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=(0,n.A)(i().mark((function e(t){var r,n,a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[{abi:"AsterNftChef",address:d.NQ.NFTChef,params:[],method:"v42PerBlock"},{abi:"AsterNftChef",address:d.NQ.NFTChef,params:[j.pid],method:"getPool"},{abi:"AsterNftChef",address:d.NQ.NFTChef,params:[],method:"totalAllocPoint"},{abi:"ParaPeriphery",address:b.A.ParaPeriphery,params:[b.A.V42NEW,b.A.USDT,b.A.ParaRouter],method:"getPrice"}],e.next=3,(0,E.A)(r);case 3:n=e.sent,a=(0,A.g)((0,N.fm)(n[0])).multipliedBy(n[1].allocPoint).dividedBy(n[2]),s=a.dividedBy(3).multipliedBy(86400).multipliedBy(365).multipliedBy((0,N.fm)(n[3])).dividedBy(t).multipliedBy(100),J((0,N.pZ)(s,2));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=(0,n.A)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y&&r.address){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,f.ye)(y,r.address,d.NQ.NFTChef);case 4:t=e.sent,S(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=(0,n.A)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y&&r.address){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,f.G1)(y,d.NQ.NFTChef).catch((function(){}));case 4:e.sent?(S(!0),p.A.show(t("common.active_success"))):p.A.show(t("common.active_fail"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=(0,n.A)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.address){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,f.WG)(j.pid,[n],r.address);case 4:e.sent?(ne(y,j.img),ae(),p.A.show(t("page.PledgeV42.pledge_tip_success"))):p.A.show(t("page.AsterProject.pledge_fail"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){!function(){var e=[{address:d.lz[0].address,price:d.lz[0].price,pid:d.lz[0].pid,img:d.lz[0].img},{address:d.kF[0].address,price:d.kF[0].price,pid:d.kF[0].pid,img:d.kF[0].img},{address:d.Af[0].address,price:d.Af[0].price,pid:d.Af[0].pid,img:d.Af[0].img}];z(e[te].address),T({price:e[te].price,pid:e[te].pid,img:e[te].img});var t=[d.lz,d.kF,d.Af];ee(t[te])}()}),[]),(0,c.useEffect)((function(){var e=[{address:d.lz[0].address,img:d.lz[0].img},{address:d.kF[0].address,img:d.kF[0].img},{address:d.Af[0].address,img:d.Af[0].img}];ne(e[te].address,e[te].img)}),[null==r?void 0:r.address]),(0,c.useEffect)((function(){ae(),ie()}),[y,r.address]),c.createElement("div",null,c.createElement("div",{className:"font-color-white mt-10 font-weight-500 font-size-16 ml-20"},t("page.AsterProject.nft_mining")),c.createElement("div",{className:"divide-line mt-10 ml-20 mr-20"}),c.createElement(l.A,{bgColor:"#141416"},c.createElement("div",{className:"flex-row fl-ai-center fl-jc-between"},c.createElement("div",{className:"font-weight-500 font-color-white ",style:{fontSize:"2rem"}},t("utils.tool.pledge"),"NFT"),c.createElement("div",{className:"font-weight-400 font-size-12",style:{color:"#FF7F00"}},t("utils.tool.earn")," V42")),c.createElement("div",{className:"flex-row fl-ai-center fl-jc-between mt-15"},c.createElement("div",{className:"flex-column"},c.createElement("div",{className:"font-weight-400 font-color-describe font-size-12"},"TVL"),c.createElement("div",{className:"font-weight-bold font-color-white font-size-14 mt-5"},"$",W)),c.createElement("div",{className:"flex-column"},c.createElement("div",{className:"font-weight-400 font-color-describe font-size-12"},"V42 APR"),c.createElement("div",{className:"font-weight-bold font-color-green font-size-14 mt-5"},I,"%")))),c.createElement("div",{className:"aster-nft-list"},X.map((function(e,t){return c.createElement("div",{onClick:function(){return re(e)},className:"hnl-item flex-column fl-jc-center fl-ai-center ".concat(e.address===y&&"hnl-item-border-check"),key:t},c.createElement("img",{src:e.img,className:"aster-img"}),c.createElement("div",{className:"font-weight-400 font-color-white font-size-14 mt-10"},e.name),c.createElement("div",{className:"hln-item-check"},c.createElement(m.Sc,{iconSize:"14px",checked:e.address===y})))}))),Z.length<=0&&U&&c.createElement("div",{className:"ags-loading"},c.createElement(g.A,null)),Z.length<=0&&!U&&c.createElement(m.Sv,{description:t("page.PreSaleNFT.sale_no_canuse")}),Z.map((function(e,r){return c.createElement(l.A,{bgColor:"#141416",key:r},c.createElement("div",{className:"flex-row fl-jc-between fl-ai-center"},c.createElement("img",{src:e.img,className:"aster-img"}),c.createElement("div",{className:"flex-column fl-jc-between ml-10 flex-1",style:{height:"4.4rem"}},c.createElement("div",{className:"font-color-describe font-size-12 font-weight-400"},t("page.StructuredFund.bianhao")),c.createElement("div",{className:"font-color-white font-size-16 font-weight-500"},e.id)),c.createElement("div",{className:"aster-button-pledge flex-center button-click",onClick:function(){return P?oe(e.id):ce()}},t(P?"page.DaoAggregationPool.once_pledge":"component.DaoClaimProfit.activate_transaction"))))})),c.createElement(l.A,{bgColor:"#141416"},c.createElement("div",{className:"flex-row fl-jc-between fl-ai-center",onClick:function(){return s.push("/nftStore/".concat(te))}},c.createElement("div",{className:"font-color-white font-weight-400 font-size-14"},t("common.my_position")),c.createElement(h.i3G,{className:"font-color-describe"}))),c.createElement("img",{src:w.A,className:"bottom-home",onClick:function(){return s.push("/")}}))}}}]);